#!/bin/bash

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è Obsidian to Hugo converter
set -euo pipefail

echo "üöÄ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Obsidian to Hugo Converter"
echo "=========================================="

# –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –¥–µ–º–æ
DEMO_DIR=$(mktemp -d)
echo "üìÅ –°–æ–∑–¥–∞–Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $DEMO_DIR"

# –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–µ–º–æ Obsidian vault
OBSIDIAN_VAULT="$DEMO_DIR/obsidian_vault"
HUGO_SITE="$DEMO_DIR/hugo_site"

mkdir -p "$OBSIDIAN_VAULT"
mkdir -p "$HUGO_SITE"

echo "üìù –°–æ–∑–¥–∞–µ–º –¥–µ–º–æ Obsidian –∑–∞–º–µ—Ç–∫–∏..."

# –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω—É—é –∑–∞–º–µ—Ç–∫—É
cat > "$OBSIDIAN_VAULT/README.md" << 'EOF'
---
title: "–ú–æ—è Wiki"
tags: [wiki, –≥–ª–∞–≤–Ω–∞—è]
created: 2024-01-01
---

# –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–æ—é Wiki

–≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è wiki, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∏–∑ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

## –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

- [[–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ]]
- [[–ó–∞–º–µ—Ç–∫–∏]]
- [[–ü—Ä–æ–µ–∫—Ç—ã]]

> [!note] –í–∞–∂–Ω–æ
> –≠—Ç–∞ wiki –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ Obsidian —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞!

## –¢–µ–≥–∏

#wiki #–¥–µ–º–æ #obsidian
EOF

# –°–æ–∑–¥–∞–µ–º –∑–∞–º–µ—Ç–∫—É –æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏
cat > "$OBSIDIAN_VAULT/–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ.md" << 'EOF'
---
title: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"
tags: [–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, python, hugo]
created: 2024-01-01
---

# –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã –∑–∞–º–µ—Ç–∫–∏ –æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏.

## Python

Python - –æ—Ç–ª–∏—á–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö.

```python
def hello_world():
    print("Hello, World!")
    return "Hello from Python!"
```

## Hugo

Hugo - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∞–π—Ç–æ–≤.

> [!tip] –°–æ–≤–µ—Ç
> Hugo –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–ª–æ–≥–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- [[–ó–∞–º–µ—Ç–∫–∏]]
- [[–ü—Ä–æ–µ–∫—Ç—ã]]
EOF

# –°–æ–∑–¥–∞–µ–º –∑–∞–º–µ—Ç–∫—É —Å –∑–∞–º–µ—Ç–∫–∞–º–∏
cat > "$OBSIDIAN_VAULT/–ó–∞–º–µ—Ç–∫–∏.md" << 'EOF'
---
title: "–ó–∞–º–µ—Ç–∫–∏"
tags: [–∑–∞–º–µ—Ç–∫–∏, –∏–¥–µ–∏]
created: 2024-01-01
---

# –ó–∞–º–µ—Ç–∫–∏

–†–∞–∑–ª–∏—á–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –∏ –∏–¥–µ–∏.

## –ò–¥–µ–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤

1. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä Obsidian ‚Üí Hugo
2. –ù–∞–ø–∏—Å–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
3. –°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ

> [!warning] –í–Ω–∏–º–∞–Ω–∏–µ
> –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–¥–µ–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏!

## –°—Å—ã–ª–∫–∏

- [[–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ]]
- [[–ü—Ä–æ–µ–∫—Ç—ã]]
EOF

# –°–æ–∑–¥–∞–µ–º –∑–∞–º–µ—Ç–∫—É –æ –ø—Ä–æ–µ–∫—Ç–∞—Ö
cat > "$OBSIDIAN_VAULT/–ü—Ä–æ–µ–∫—Ç—ã.md" << 'EOF'
---
title: "–ü—Ä–æ–µ–∫—Ç—ã"
tags: [–ø—Ä–æ–µ–∫—Ç—ã, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞]
created: 2024-01-01
---

# –ü—Ä–æ–µ–∫—Ç—ã

–ú–æ–∏ —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã.

## Obsidian to Hugo Converter

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è Obsidian –≤ Hugo.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è wikilinks
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–≥–æ–≤
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ callouts

> [!success] –ì–æ—Ç–æ–≤–æ
> –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- [[–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ]]
- [[–ó–∞–º–µ—Ç–∫–∏]]
EOF

# –°–æ–∑–¥–∞–µ–º –ø–æ–¥–ø–∞–ø–∫—É —Å –∑–∞–º–µ—Ç–∫–∞–º–∏
mkdir -p "$OBSIDIAN_VAULT/–ø–æ–¥–ø–∞–ø–∫–∞"
cat > "$OBSIDIAN_VAULT/–ø–æ–¥–ø–∞–ø–∫–∞/–í–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞.md" << 'EOF'
---
title: "–í–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞"
tags: [–≤–ª–æ–∂–µ–Ω–Ω–∞—è, –ø—Ä–∏–º–µ—Ä]
---

# –í–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞

–≠—Ç–æ –∑–∞–º–µ—Ç–∫–∞ –≤ –ø–æ–¥–ø–∞–ø–∫–µ.

## –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏

- [[README]]
- [[–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ]]

> [!info] –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
> –≠—Ç–∞ –∑–∞–º–µ—Ç–∫–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –ø–∞–ø–∫–∞–º–∏.
EOF

# –°–æ–∑–¥–∞–µ–º –¥–µ–º–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
echo "–°–æ–∑–¥–∞–µ–º –¥–µ–º–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ..." > "$OBSIDIAN_VAULT/demo.png"

echo "‚úÖ –î–µ–º–æ Obsidian vault —Å–æ–∑–¥–∞–Ω!"
echo "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:"
echo "   - –§–∞–π–ª–æ–≤: $(find "$OBSIDIAN_VAULT" -name "*.md" | wc -l)"
echo "   - –ü–∞–ø–æ–∫: $(find "$OBSIDIAN_VAULT" -type d | wc -l)"
echo "   - –í–ª–æ–∂–µ–Ω–∏–π: $(find "$OBSIDIAN_VAULT" -name "*.png" | wc -l)"

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ Hugo –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd "$HUGO_SITE"

echo ""
echo "üîß –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Hugo —Å–∞–π—Ç..."

# –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Hugo
cp /workspace/configs/hugo.toml .

# –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É Hugo
mkdir -p content static archetypes

echo "üîÑ –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é..."

# –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä
python3 -m obsidian_to_hugo convert \
  --obsidian-vault "$OBSIDIAN_VAULT" \
  --hugo-content ./content \
  --hugo-static ./static \
  --hugo-archetypes ./archetypes \
  --theme "hugo-papermod" \
  --toc-max-depth 3

echo ""
echo "‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo "üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:"
echo "   - Hugo —Ñ–∞–π–ª–æ–≤: $(find ./content -name "*.md" | wc -l)"
echo "   - –í–ª–æ–∂–µ–Ω–∏–π —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: $(find ./static -type f | wc -l)"

echo ""
echo "üìñ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:"
echo "======================================"

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
for file in ./content/*.md; do
    if [ -f "$file" ]; then
        echo ""
        echo "üìÑ $(basename "$file"):"
        echo "---"
        head -20 "$file"
        echo "..."
    fi
done

echo ""
echo "üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–º—É PaperMod:"
echo "   git submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/hugo-papermod"
echo ""
echo "2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Hugo —Å–µ—Ä–≤–µ—Ä:"
echo "   cd $HUGO_SITE"
echo "   hugo server -D"
echo ""
echo "3. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:1313"
echo ""
echo "4. –û—á–∏—Å—Ç–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:"
echo "   rm -rf $DEMO_DIR"
echo ""
echo "üéâ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"