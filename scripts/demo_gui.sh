#!/bin/bash

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
set -euo pipefail

echo "üöÄ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Obsidian to Hugo Converter"
echo "=========================================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ PyQt6
echo "üì¶ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
if ! python3 -c "import PyQt6" 2>/dev/null; then
    echo "‚ùå PyQt6 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º..."
    pip install PyQt6 qt-material
else
    echo "‚úÖ PyQt6 —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

if ! python3 -c "import qt_material" 2>/dev/null; then
    echo "‚ùå qt-material –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º..."
    pip install qt-material
else
    echo "‚úÖ qt-material —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

echo ""
echo "üé® –ó–∞–ø—É—Å–∫–∞–µ–º GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
echo "=================================="
echo ""
echo "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:"
echo "1. –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç–∏ –∫ Obsidian vault –∏ Hugo –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º"
echo "2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É Hugo –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏"
echo "3. –ù–∞–∂–º–∏—Ç–µ 'Convert' –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏"
echo "4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 'Start Watching' –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö"
echo "5. –ù–∞–∂–º–∏—Ç–µ 'Analyze Vault' –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞"
echo "6. –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –ª–æ–≥–æ–≤"
echo ""
echo "–î–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ GUI
echo "üñ•Ô∏è  –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
echo ""

# –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –¥–∏—Å–ø–ª–µ–µ
echo "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –¥–∏—Å–ø–ª–µ–µ:"
xvfb-run -a python3 -c "
from obsidian_to_hugo.ui import main
print('‚úÖ GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –¥–∏—Å–ø–ª–µ–µ')
print('üéâ PyQt6 GUI —Å Material Design –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!')
"

echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ GUI –≤ —Ä–µ–∞–ª—å–Ω–æ–º –¥–∏—Å–ø–ª–µ–µ:"
echo "1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏—Å–ø–ª–µ–π (X11, Wayland)"
echo "2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DISPLAY: export DISPLAY=:0"
echo "3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python3 -m obsidian_to_hugo --gui"
echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ GUI –≤ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ:"
echo "1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ X11 forwarding: ssh -X user@host"
echo "2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ VNC —Å–µ—Ä–≤–µ—Ä"
echo "3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python3 -m obsidian_to_hugo --gui"